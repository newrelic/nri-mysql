{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "prConcurrentLimit": 0,
  "prHourlyLimit": 0,
  "prCreation": "immediate",
  "internalChecksAsSuccess": true,
  "ignorePaths": [
    "**/node_modules/**",
    "**/bower_components/**",
    "**/vendor/**",
    "**/examples/**",
    "**/__tests__/**",
//    "**/test/**", Disabling default ignored path
//    "**/tests/**",
    "**/__fixtures__/**"
  ],
  "printConfig": true,
  "labels": ["dependencies"],
  // Update source import paths on major module updates, using mod.
  // Since postUpdateOptions is mergeable, all previous and future values are kept
  "postUpdateOptions": ["gomodUpdateImportPaths"],
  // The rules defined here will be used in all core-int repositories, so they should be valid
  // for all of them.
  "packageRules": [
    // Renovate will do the following when detecting a new dependency bump:
    // - If it's one of the exclusions it will create a PR (major, 0. or v0. and sarama)
    // - In case it matches one of the rest cases, it will create a branch that will be auto merged if tests pass.
    // - If in the previous step tests fail, a PR will be created instead of merging the branch.
    {
      // We always merge patch updates.
      "matchUpdateTypes": ["patch"],
      // Exclude packages known for breaking changes even in minor and patch upgrades.
      "excludePackagePatterns": ["sarama"],
      // Exclude any dependencies which are pre-1.0.0 because those can make breaking changes at any time
      // according to the SemVer spec.
      "matchCurrentVersion": "!/^(0|v0)/",
      // Renovate will do the following when detecting a new dependency bump:
      "automerge": true,
      "automergeType": "branch",
      "pruneBranchAfterAutomerge": true
    },
    {
      // Minor versions are also auto-merged except for golang
      "matchUpdateTypes": ["minor"],
      // Exclude packages known for breaking changes even in minor and patch upgrades.
      "excludePackagePatterns": ["sarama"],
      // Exclude any dependencies which are pre-1.0.0 because those can make breaking changes at any time
      // according to the SemVer spec.
      "matchCurrentVersion": "!/^(0|v0)/",
      // Exclude golang dependency so golang version in Docker files is not auto-merged.
      "excludeDepNames": ["golang"],
      "automerge": true,
      "automergeType": "branch",
      "pruneBranchAfterAutomerge": true
    },
    {
        "matchDatasources": [
            "dockerfile",
            "go.mod"
        ],
        "matchPackageNames": [
            "golang",
            "go"
        ],
        "matchPaths": [
            "build/Dockerfile",
            "go.mod"
        ],
        "matchUpdateTypes": [
            "patch"
        ],
        "automerge": true,
        "automergeType": "branch",
        "pruneBranchAfterAutomerge": true
    },
    {
        "matchDatasources": [
            "dockerfile",
            "go.mod"
        ],
        "matchPackageNames": [
            "golang",
            "go"
        ],
        "matchPaths": [
            "build/Dockerfile",
            "go.mod"
        ],
        "matchUpdateTypes": [
            "major",
            "minor"
        ],
        "automerge": false,
        "automergeType": "pr",
        "pruneBranchAfterAutomerge": true
    }
  ]
}
